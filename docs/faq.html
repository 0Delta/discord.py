
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Frequently Asked Questions &#8212; discord.py 1.0.0a documentation</title>
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/custom.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="whats_new.html" />
    <link rel="prev" title="Creating a Bot Account" href="discord.html" />
   
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="whats_new.html" title="Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="discord.html" title="Creating a Bot Account"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">discord.py 1.0.0a documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frequently-asked-questions">
<span id="faq"></span><h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<p>This is a list of Frequently Asked Questions regarding using <code class="docutils literal notranslate"><span class="pre">discord.py</span></code> and its extension modules. Feel free to suggest a
new question or submit one via pull requests.</p>
<div class="contents local topic" id="questions">
<p class="topic-title first">Questions</p>
<ul class="simple">
<li><p><a class="reference internal" href="#coroutines" id="id1">Coroutines</a></p>
<ul>
<li><p><a class="reference internal" href="#i-get-a-syntaxerror-around-the-word-async-what-should-i-do" id="id2">I get a SyntaxError around the word <code class="docutils literal notranslate"><span class="pre">async</span></code>! What should I do?</a></p></li>
<li><p><a class="reference internal" href="#what-is-a-coroutine" id="id3">What is a coroutine?</a></p></li>
<li><p><a class="reference internal" href="#where-can-i-use-await" id="id4">Where can I use <code class="docutils literal notranslate"><span class="pre">await</span></code>?</a></p></li>
<li><p><a class="reference internal" href="#what-does-blocking-mean" id="id5">What does “blocking” mean?</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#general" id="id6">General</a></p>
<ul>
<li><p><a class="reference internal" href="#how-do-i-set-the-playing-status" id="id7">How do I set the “Playing” status?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-send-a-message-to-a-specific-channel" id="id8">How do I send a message to a specific channel?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-upload-an-image" id="id9">How do I upload an image?</a></p></li>
<li><p><a class="reference internal" href="#how-can-i-add-a-reaction-to-a-message" id="id10">How can I add a reaction to a message?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-pass-a-coroutine-to-the-player-s-after-function" id="id11">How do I pass a coroutine to the player’s “after” function?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-run-something-in-the-background" id="id12">How do I run something in the background?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-get-a-specific-model" id="id13">How do I get a specific model?</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#commands-extension" id="id14">Commands Extension</a></p>
<ul>
<li><p><a class="reference internal" href="#is-there-any-documentation-for-this" id="id15">Is there any documentation for this?</a></p></li>
<li><p><a class="reference internal" href="#why-does-on-message-make-my-commands-stop-working" id="id16">Why does <code class="docutils literal notranslate"><span class="pre">on_message</span></code> make my commands stop working?</a></p></li>
<li><p><a class="reference internal" href="#why-do-my-arguments-require-quotes" id="id17">Why do my arguments require quotes?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-get-the-original-message" id="id18">How do I get the original <code class="docutils literal notranslate"><span class="pre">message</span></code>?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-make-a-subcommand" id="id19">How do I make a subcommand?</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="coroutines">
<h2><a class="toc-backref" href="#id1">Coroutines</a><a class="headerlink" href="#coroutines" title="Permalink to this headline">¶</a></h2>
<p>Questions regarding coroutines and asyncio belong here.</p>
<div class="section" id="i-get-a-syntaxerror-around-the-word-async-what-should-i-do">
<h3><a class="toc-backref" href="#id2">I get a SyntaxError around the word <code class="docutils literal notranslate"><span class="pre">async</span></code>! What should I do?</a><a class="headerlink" href="#i-get-a-syntaxerror-around-the-word-async-what-should-i-do" title="Permalink to this headline">¶</a></h3>
<p>This <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#SyntaxError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> happens because you’re using a Python version lower than 3.5. Python 3.4 uses <code class="docutils literal notranslate"><span class="pre">&#64;asyncio.coroutine</span></code> and
<code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> instead of <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> and <code class="docutils literal notranslate"><span class="pre">await</span></code>.</p>
<p>Thus you must do the following instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">bar</span><span class="p">()</span>

<span class="c1"># into</span>

<span class="nd">@asyncio</span><span class="o">.</span><span class="n">coroutine</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">yield from</span> <span class="n">bar</span><span class="p">()</span>
</pre></div>
</div>
<p>Don’t forget to <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">asyncio</span></code> on the top of your files.</p>
<p><strong>It is heavily recommended that you update to Python 3.5 or higher as it simplifies asyncio massively.</strong></p>
</div>
<div class="section" id="what-is-a-coroutine">
<h3><a class="toc-backref" href="#id3">What is a coroutine?</a><a class="headerlink" href="#what-is-a-coroutine" title="Permalink to this headline">¶</a></h3>
<p>A coroutine is a function that must be invoked with <code class="docutils literal notranslate"><span class="pre">await</span></code> or <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code>. When Python encounters an <code class="docutils literal notranslate"><span class="pre">await</span></code> it stops
the function’s execution at that point and works on other things until it comes back to that point and finishes off its work.
This allows for your program to be doing multiple things at the same time without using threads or complicated
multiprocessing.</p>
<p><strong>If you forget to await a coroutine then the coroutine will not run. Never forget to await a coroutine.</strong></p>
</div>
<div class="section" id="where-can-i-use-await">
<h3><a class="toc-backref" href="#id4">Where can I use <code class="docutils literal notranslate"><span class="pre">await</span></code>?</a><a class="headerlink" href="#where-can-i-use-await" title="Permalink to this headline">¶</a></h3>
<p>You can only use <code class="docutils literal notranslate"><span class="pre">await</span></code> inside <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> functions and nowhere else.</p>
</div>
<div class="section" id="what-does-blocking-mean">
<h3><a class="toc-backref" href="#id5">What does “blocking” mean?</a><a class="headerlink" href="#what-does-blocking-mean" title="Permalink to this headline">¶</a></h3>
<p>In asynchronous programming a blocking call is essentially all the parts of the function that are not <code class="docutils literal notranslate"><span class="pre">await</span></code>. Do not
despair however, because not all forms of blocking are bad! Using blocking calls is inevitable, but you must work to make
sure that you don’t excessively block functions. Remember, if you block for too long then your bot will freeze since it has
not stopped the function’s execution at that point to do other things.</p>
<p>A common source of blocking for too long is something like <a class="reference external" href="https://docs.python.org/3/library/time.html#time.sleep" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.sleep()</span></code></a>. Don’t do that. Use <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.sleep" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.sleep()</span></code></a>
instead. Similar to this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># good</span>
<span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Another common source of blocking for too long is using HTTP requests with the famous module <code class="docutils literal notranslate"><span class="pre">requests</span></code>. While <code class="docutils literal notranslate"><span class="pre">requests</span></code>
is an amazing module for non-asynchronous programming, it is not a good choice for <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.6)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> because certain requests can
block the event loop too long. Instead, use the <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code> library which is installed on the side with this library.</p>
<p>Consider the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://random.cat/meow&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
    <span class="n">js</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">js</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>

<span class="c1"># good</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://random.cat/meow&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">r</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">js</span> <span class="o">=</span> <span class="k">await</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">js</span><span class="p">[</span><span class="s1">&#39;file&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="general">
<h2><a class="toc-backref" href="#id6">General</a><a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<p>General questions regarding library usage belong here.</p>
<div class="section" id="how-do-i-set-the-playing-status">
<h3><a class="toc-backref" href="#id7">How do I set the “Playing” status?</a><a class="headerlink" href="#how-do-i-set-the-playing-status" title="Permalink to this headline">¶</a></h3>
<p>There is a method for this under <a class="reference internal" href="api.html#discord.Client" title="discord.Client"><code class="xref py py-class docutils literal notranslate"><span class="pre">Client</span></code></a> called <a class="reference internal" href="api.html#discord.Client.change_presence" title="discord.Client.change_presence"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Client.change_presence()</span></code></a>. The relevant aspect of this is its
<code class="docutils literal notranslate"><span class="pre">game</span></code> keyword argument which takes in a <a class="reference internal" href="api.html#discord.Game" title="discord.Game"><code class="xref py py-class docutils literal notranslate"><span class="pre">Game</span></code></a> object. Putting both of these pieces of info together, you get the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">change_presence</span><span class="p">(</span><span class="n">game</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">Game</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;my game&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-send-a-message-to-a-specific-channel">
<h3><a class="toc-backref" href="#id8">How do I send a message to a specific channel?</a><a class="headerlink" href="#how-do-i-send-a-message-to-a-specific-channel" title="Permalink to this headline">¶</a></h3>
<p>You must fetch the channel directly and then call the appropriate method. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">channel</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_channel</span><span class="p">(</span><span class="mi">12324234183172</span><span class="p">)</span>
<span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-upload-an-image">
<h3><a class="toc-backref" href="#id9">How do I upload an image?</a><a class="headerlink" href="#how-do-i-upload-an-image" title="Permalink to this headline">¶</a></h3>
<p>To upload something to Discord you have to use the <a class="reference internal" href="api.html#discord.File" title="discord.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> object.</p>
<p>A <a class="reference internal" href="api.html#discord.File" title="discord.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> accepts two parameters, the file-like object (or file path) and the filename
to pass to Discord when uploading.</p>
<p>If you want to upload an image it’s as simple as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;my_file.png&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>If you have a file-like object you can do as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;my_file.png&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s1">&#39;new_filename.png&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>To upload multiple files, you can use the <code class="docutils literal notranslate"><span class="pre">files</span></code> keyword argument instead of <code class="docutils literal notranslate"><span class="pre">file</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">discord</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;result.zip&#39;</span><span class="p">),</span>
    <span class="n">discord</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;teaser_graph.png&#39;</span><span class="p">),</span>
<span class="p">]</span>
<span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">files</span><span class="o">=</span><span class="n">my_files</span><span class="p">)</span>
</pre></div>
</div>
<p>If you want to upload something from a URL, you will have to use an HTTP request using <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code>
and then pass an <a class="reference external" href="https://docs.python.org/3/library/io.html#io.BytesIO" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.BytesIO</span></code></a> instance to <a class="reference internal" href="api.html#discord.File" title="discord.File"><code class="xref py py-class docutils literal notranslate"><span class="pre">File</span></code></a> like so:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">aiohttp</span>

<span class="k">async</span> <span class="k">with</span> <span class="n">aiohttp</span><span class="o">.</span><span class="n">ClientSession</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">my_url</span><span class="p">)</span> <span class="k">as</span> <span class="n">resp</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">status</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Could not download file...&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="k">await</span> <span class="n">resp</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">await</span> <span class="n">channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">discord</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;cool_image.png&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="how-can-i-add-a-reaction-to-a-message">
<h3><a class="toc-backref" href="#id10">How can I add a reaction to a message?</a><a class="headerlink" href="#how-can-i-add-a-reaction-to-a-message" title="Permalink to this headline">¶</a></h3>
<p>You use the <a class="reference internal" href="api.html#discord.Message.add_reaction" title="discord.Message.add_reaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.add_reaction()</span></code></a> method.</p>
<p>If you want to use unicode emoji, you must pass a valid unicode code point in a string. In your code, you can write this in a few different ways:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'👍'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'\U0001F44D'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'\N{THUMBS</span> <span class="pre">UP</span> <span class="pre">SIGN}'</span></code></p></li>
</ul>
<p>Quick example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">await</span> <span class="n">message</span><span class="o">.</span><span class="n">add_reaction</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\N{THUMBS UP SIGN}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In case you want to use emoji that come from a message, you already get their code points in the content without needing
to do anything special. You <strong>cannot</strong> send <code class="docutils literal notranslate"><span class="pre">':thumbsup:'</span></code> style shorthands.</p>
<p>For custom emoji, you should pass an instance of <a class="reference internal" href="api.html#discord.Emoji" title="discord.Emoji"><code class="xref py py-class docutils literal notranslate"><span class="pre">Emoji</span></code></a>. You can also pass a <code class="docutils literal notranslate"><span class="pre">'name:id'</span></code> string, but if you
can use said emoji, you should be able to use <a class="reference internal" href="api.html#discord.Client.get_emoji" title="discord.Client.get_emoji"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Client.get_emoji()</span></code></a> to get an emoji via ID or use <a class="reference internal" href="api.html#discord.utils.find" title="discord.utils.find"><code class="xref py py-func docutils literal notranslate"><span class="pre">utils.find()</span></code></a>/
<a class="reference internal" href="api.html#discord.utils.get" title="discord.utils.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">utils.get()</span></code></a> on <a class="reference internal" href="api.html#discord.Client.emojis" title="discord.Client.emojis"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Client.emojis</span></code></a> or <a class="reference internal" href="api.html#discord.Guild.emojis" title="discord.Guild.emojis"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Guild.emojis</span></code></a> collections.</p>
<p>Quick example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># if you have the ID already</span>
<span class="n">emoji</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_emoji</span><span class="p">(</span><span class="mi">310177266011340803</span><span class="p">)</span>
<span class="k">await</span> <span class="n">message</span><span class="o">.</span><span class="n">add_reaction</span><span class="p">(</span><span class="n">emoji</span><span class="p">)</span>

<span class="c1"># no ID, do a lookup</span>
<span class="n">emoji</span> <span class="o">=</span> <span class="n">discord</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">guild</span><span class="o">.</span><span class="n">emojis</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;LUL&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">emoji</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">message</span><span class="o">.</span><span class="n">add_reaction</span><span class="p">(</span><span class="n">emoji</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-pass-a-coroutine-to-the-player-s-after-function">
<h3><a class="toc-backref" href="#id11">How do I pass a coroutine to the player’s “after” function?</a><a class="headerlink" href="#how-do-i-pass-a-coroutine-to-the-player-s-after-function" title="Permalink to this headline">¶</a></h3>
<p>The library’s music player launches on a separate thread, ergo it does not execute inside a coroutine.
This does not mean that it is not possible to call a coroutine in the <code class="docutils literal notranslate"><span class="pre">after</span></code> parameter. To do so you must pass a callable
that wraps up a couple of aspects.</p>
<p>The first gotcha that you must be aware of is that calling a coroutine is not a thread-safe operation. Since we are
technically in another thread, we must take caution in calling thread-safe operations so things do not bug out. Luckily for
us, <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.6)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> comes with a <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.run_coroutine_threadsafe" title="(in Python v3.6)"><code class="xref py py-func docutils literal notranslate"><span class="pre">asyncio.run_coroutine_threadsafe()</span></code></a> function that allows us to call
a coroutine from another thread.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is only part of 3.5.1+ and 3.4.4+. If you are not using these Python versions then use
<code class="docutils literal notranslate"><span class="pre">discord.compat.run_coroutine_threadsafe</span></code>.</p>
</div>
<p>However, this function returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">concurrent.Future</span></code> and to actually call it we have to fetch its result. Putting all of
this together we can do the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_after</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
    <span class="n">coro</span> <span class="o">=</span> <span class="n">some_channel</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Song is done!&#39;</span><span class="p">)</span>
    <span class="n">fut</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run_coroutine_threadsafe</span><span class="p">(</span><span class="n">coro</span><span class="p">,</span> <span class="n">client</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">fut</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="c1"># an error happened sending the message</span>
        <span class="k">pass</span>

<span class="n">voice</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">discord</span><span class="o">.</span><span class="n">FFmpegPCMAudio</span><span class="p">(</span><span class="n">url</span><span class="p">),</span> <span class="n">after</span><span class="o">=</span><span class="n">my_after</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-run-something-in-the-background">
<h3><a class="toc-backref" href="#id12">How do I run something in the background?</a><a class="headerlink" href="#how-do-i-run-something-in-the-background" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/Rapptz/discord.py/blob/rewrite/examples/background_task.py">Check the background_task.py example.</a></p>
</div>
<div class="section" id="how-do-i-get-a-specific-model">
<h3><a class="toc-backref" href="#id13">How do I get a specific model?</a><a class="headerlink" href="#how-do-i-get-a-specific-model" title="Permalink to this headline">¶</a></h3>
<p>There are multiple ways of doing this. If you have a specific model’s ID then you can use
one of the following functions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="api.html#discord.Client.get_channel" title="discord.Client.get_channel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Client.get_channel()</span></code></a></p></li>
<li><p><a class="reference internal" href="api.html#discord.Client.get_guild" title="discord.Client.get_guild"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Client.get_guild()</span></code></a></p></li>
<li><p><a class="reference internal" href="api.html#discord.Client.get_user" title="discord.Client.get_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Client.get_user()</span></code></a></p></li>
<li><p><a class="reference internal" href="api.html#discord.Client.get_emoji" title="discord.Client.get_emoji"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Client.get_emoji()</span></code></a></p></li>
<li><p><a class="reference internal" href="api.html#discord.Guild.get_member" title="discord.Guild.get_member"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Guild.get_member()</span></code></a></p></li>
<li><p><a class="reference internal" href="api.html#discord.Guild.get_channel" title="discord.Guild.get_channel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Guild.get_channel()</span></code></a></p></li>
</ul>
<p>The following use an HTTP request:</p>
<ul class="simple">
<li><p><a class="reference internal" href="api.html#discord.abc.Messageable.get_message" title="discord.abc.Messageable.get_message"><code class="xref py py-meth docutils literal notranslate"><span class="pre">abc.Messageable.get_message()</span></code></a></p></li>
<li><p><a class="reference internal" href="api.html#discord.Client.get_user_info" title="discord.Client.get_user_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Client.get_user_info()</span></code></a></p></li>
</ul>
<p>If the functions above do not help you, then use of <a class="reference internal" href="api.html#discord.utils.find" title="discord.utils.find"><code class="xref py py-func docutils literal notranslate"><span class="pre">utils.find()</span></code></a> or <a class="reference internal" href="api.html#discord.utils.get" title="discord.utils.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">utils.get()</span></code></a> would serve some use in finding
specific models.</p>
<p>Quick example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># find a guild by name</span>
<span class="n">guild</span> <span class="o">=</span> <span class="n">discord</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">guilds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;My Server&#39;</span><span class="p">)</span>

<span class="c1"># make sure to check if it&#39;s found</span>
<span class="k">if</span> <span class="n">guild</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># find a channel by name</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">discord</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">guild</span><span class="o">.</span><span class="n">text_channels</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;cool-channel&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="commands-extension">
<h2><a class="toc-backref" href="#id14">Commands Extension</a><a class="headerlink" href="#commands-extension" title="Permalink to this headline">¶</a></h2>
<p>Questions regarding <code class="docutils literal notranslate"><span class="pre">discord.ext.commands</span></code> belong here.</p>
<div class="section" id="is-there-any-documentation-for-this">
<h3><a class="toc-backref" href="#id15">Is there any documentation for this?</a><a class="headerlink" href="#is-there-any-documentation-for-this" title="Permalink to this headline">¶</a></h3>
<p>Not at the moment. Writing documentation for stuff takes time. A lot of people get by reading the docstrings in the source
code. Others get by via asking questions in the <a class="reference external" href="https://discord.gg/discord-api">Discord server</a>. Others look at the
source code of <a class="reference external" href="https://github.com/Rapptz/RoboDanny">other existing bots</a>.</p>
<p>There is a <a class="reference external" href="https://github.com/Rapptz/discord.py/blob/rewrite/examples/basic_bot.py">basic example</a> showcasing some
functionality.</p>
<p><strong>Documentation is being worked on, it will just take some time to polish it</strong>.</p>
</div>
<div class="section" id="why-does-on-message-make-my-commands-stop-working">
<h3><a class="toc-backref" href="#id16">Why does <code class="docutils literal notranslate"><span class="pre">on_message</span></code> make my commands stop working?</a><a class="headerlink" href="#why-does-on-message-make-my-commands-stop-working" title="Permalink to this headline">¶</a></h3>
<p>Overriding the default provided <code class="docutils literal notranslate"><span class="pre">on_message</span></code> forbids any extra commands from running. To fix this, add a
<code class="docutils literal notranslate"><span class="pre">bot.process_commands(message)</span></code> line at the end of your <code class="docutils literal notranslate"><span class="pre">on_message</span></code>. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@bot</span><span class="o">.</span><span class="n">event</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">on_message</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="c1"># do some extra stuff here</span>

    <span class="k">await</span> <span class="n">bot</span><span class="o">.</span><span class="n">process_commands</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="why-do-my-arguments-require-quotes">
<h3><a class="toc-backref" href="#id17">Why do my arguments require quotes?</a><a class="headerlink" href="#why-do-my-arguments-require-quotes" title="Permalink to this headline">¶</a></h3>
<p>In a simple command defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@bot</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>Calling it via <code class="docutils literal notranslate"><span class="pre">?echo</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">c</span></code> will only fetch the first argument and disregard the rest. To fix this you should either call
it via <code class="docutils literal notranslate"><span class="pre">?echo</span> <span class="pre">&quot;a</span> <span class="pre">b</span> <span class="pre">c&quot;</span></code> or change the signature to have “consume rest” behaviour. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@bot</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>This will allow you to use <code class="docutils literal notranslate"><span class="pre">?echo</span> <span class="pre">a</span> <span class="pre">b</span> <span class="pre">c</span></code> without needing the quotes.</p>
</div>
<div class="section" id="how-do-i-get-the-original-message">
<h3><a class="toc-backref" href="#id18">How do I get the original <code class="docutils literal notranslate"><span class="pre">message</span></code>?</a><a class="headerlink" href="#how-do-i-get-the-original-message" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="ext/commands/api.html#discord.ext.commands.Context" title="discord.ext.commands.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">Context</span></code></a> contains an attribute, <a class="reference internal" href="ext/commands/api.html#discord.ext.commands.Context.message" title="discord.ext.commands.Context.message"><code class="xref py py-attr docutils literal notranslate"><span class="pre">message</span></code></a> to get the original
message.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@bot</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">joined_at</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">member</span><span class="p">:</span> <span class="n">discord</span><span class="o">.</span><span class="n">Member</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="n">member</span> <span class="o">=</span> <span class="n">member</span> <span class="ow">or</span> <span class="n">ctx</span><span class="o">.</span><span class="n">author</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> joined at </span><span class="si">{0.joined_at}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">member</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="how-do-i-make-a-subcommand">
<h3><a class="toc-backref" href="#id19">How do I make a subcommand?</a><a class="headerlink" href="#how-do-i-make-a-subcommand" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">group</span></code> decorator. This will transform the callback into a <code class="docutils literal notranslate"><span class="pre">Group</span></code> which will allow you to add commands into
the group operating as “subcommands”. These groups can be arbitrarily nested as well.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@bot</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">git</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">invoked_subcommand</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Invalid git command passed...&#39;</span><span class="p">)</span>

<span class="nd">@git</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">remote</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">branch</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">ctx</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;Pushing to </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">remote</span><span class="p">,</span> <span class="n">branch</span><span class="p">))</span>
</pre></div>
</div>
<p>This could then be used as <code class="docutils literal notranslate"><span class="pre">?git</span> <span class="pre">push</span> <span class="pre">origin</span> <span class="pre">master</span></code>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Frequently Asked Questions</a><ul>
<li><a class="reference internal" href="#coroutines">Coroutines</a><ul>
<li><a class="reference internal" href="#i-get-a-syntaxerror-around-the-word-async-what-should-i-do">I get a SyntaxError around the word <code class="docutils literal notranslate"><span class="pre">async</span></code>! What should I do?</a></li>
<li><a class="reference internal" href="#what-is-a-coroutine">What is a coroutine?</a></li>
<li><a class="reference internal" href="#where-can-i-use-await">Where can I use <code class="docutils literal notranslate"><span class="pre">await</span></code>?</a></li>
<li><a class="reference internal" href="#what-does-blocking-mean">What does “blocking” mean?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#general">General</a><ul>
<li><a class="reference internal" href="#how-do-i-set-the-playing-status">How do I set the “Playing” status?</a></li>
<li><a class="reference internal" href="#how-do-i-send-a-message-to-a-specific-channel">How do I send a message to a specific channel?</a></li>
<li><a class="reference internal" href="#how-do-i-upload-an-image">How do I upload an image?</a></li>
<li><a class="reference internal" href="#how-can-i-add-a-reaction-to-a-message">How can I add a reaction to a message?</a></li>
<li><a class="reference internal" href="#how-do-i-pass-a-coroutine-to-the-player-s-after-function">How do I pass a coroutine to the player’s “after” function?</a></li>
<li><a class="reference internal" href="#how-do-i-run-something-in-the-background">How do I run something in the background?</a></li>
<li><a class="reference internal" href="#how-do-i-get-a-specific-model">How do I get a specific model?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#commands-extension">Commands Extension</a><ul>
<li><a class="reference internal" href="#is-there-any-documentation-for-this">Is there any documentation for this?</a></li>
<li><a class="reference internal" href="#why-does-on-message-make-my-commands-stop-working">Why does <code class="docutils literal notranslate"><span class="pre">on_message</span></code> make my commands stop working?</a></li>
<li><a class="reference internal" href="#why-do-my-arguments-require-quotes">Why do my arguments require quotes?</a></li>
<li><a class="reference internal" href="#how-do-i-get-the-original-message">How do I get the original <code class="docutils literal notranslate"><span class="pre">message</span></code>?</a></li>
<li><a class="reference internal" href="#how-do-i-make-a-subcommand">How do I make a subcommand?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- purposefully empty -->
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2015-2017, Rapptz.
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.1.
  </div>
  
  </body>
</html>